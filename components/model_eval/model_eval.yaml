$schema: https://azuremlschemas.azureedge.net/latest/commandComponent.schema.json
type: command

name: model_eval
display_name: Evaluate Iris Model
description: Evaluate trained model on test set and log metrics to MLflow

inputs:
  archi:
    type: uri_file
    description: Model architecture definition (Python file)
  model:
    type: uri_folder
    description: Trained PyTorch model
  scaler:
    type: uri_folder
    description: Scaler parameters for inference
  xy_test:
    type: uri_folder
    description: Test data with features and target

outputs:
  metrics:
    type: uri_folder
    description: Evaluation metrics and confusion matrix

code: .

environment: azureml:iris_train@latest

command: >-
  python model_eval.py
  --model ${{inputs.model}}
  --scaler ${{inputs.scaler}}
  --archi ${{inputs.archi}}
  --xy_test ${{inputs.xy_test}}
  --metrics ${{outputs.metrics}}